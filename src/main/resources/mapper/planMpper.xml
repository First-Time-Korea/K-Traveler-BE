<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.firskorea.plan.mapper.PlanMapper">
	<select id="getRegionList" resultType="regionDto">
		select g.sido_code,
		g.gugun_code, s.sido_name, g.gugun_name,
		s.sido_description,
		s.sido_image
		from gugun g
		join sido s
		on s.sido_code = g.sido_code
		order
		by g.sido_code, g.gugun_code;
	</select>

	<insert id="insertPlan" parameterType="map"
		useGeneratedKeys="true" keyColumn="id" keyProperty="id">
		insert into plan
		(member_id, title)
		values (#{memberId},#{title});
	</insert>

	<insert id="insertPlanAndAttraction" parameterType="map">
		insert into plan_and_attraction (plan_id, content_id, date)
		values (#{planId},#{contentId},#{date});
	</insert>

	<insert id="insertPlanFile" parameterType="PlanFileDto">
		insert into plan_file
		(save_folder, origin_file, save_file, plan_id)
		values
		(#{saveFolder},#{originFile},#{saveFile},#{planId});
	</insert>


</mapper>